import numpy as np
from matplotlib import pyplot as plt
#import normal

lines = 500
samples = 900
bands = 300
spectrum = [298.9795918367347, 321.42857142857144,377.55102040816325, 414.2857142857143,457.14285714285717,510.2040816326531,565.3061224489796,608.1632653061224,673.469387755102,721.4285714285714,
            769.3877551020408,845.9183673469388,917.3469387755102,968.3673469387755,1071.4285714285716,1123.4693877551022,1205.1020408163265,1332.6530612244899,1390.8163265306123,1429.591836734694,1521.4285714285716,
            1610.204081632653,1707.142857142857,1800.0,1888.7755102040817,1990.8163265306123,2063.265306122449,2171.4285714285716,2339.795918367347,2391.8367346938776,2495.918367346939,2538.7755102040815,2614.285714285714,
            2693.877551020408,2776.530612244898,2848.979591836735,2947.9591836734694,3076.530612244898,3115.3061224489797,3233.673469387755,3302.0408163265306,3422.4489795918366,3589.795918367347,3663.265306122449,
            3756.122448979592,3890.8163265306125,4032.6530612244896,4211.224489795918,4422.448979591837,4528.571428571428,4624.489795918367,4748.9795918367345,4831.632653061225,4923.469387755102,5032.65306122449,
            5160.2040816326535,5203.061224489796,5331.632653061225,5490.816326530612,5596.938775510204,5717.34693877551,5820.408163265306,5908.163265306122,5984.693877551021,6111.224489795918,6317.34693877551,6347.95918367347,
            6530.6122448979595,6639.795918367347,6961.224489795918,7094.897959183673,7258.163265306122,7259.183673469388,7279.591836734694,7316.326530612245,7330.6122448979595,7392.857142857143,7509.183673469388,
            7563.265306122449,7726.530612244898,7641.836734693878,7853.061224489796,7894.897959183673,7945.918367346939,7906.122448979592,8023.469387755103,8168.367346938776,8196.938775510203,8242.857142857143,8294.897959183674,
            8334.69387755102,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,
            8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,
            8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,8357.142857142857,
            8357.142857142857,8357.142857142857,8334.69387755102,8339.795918367347,8265.30612244898,8277.551020408164,8321.428571428572,8274.489795918367,8330.612244897959,8357.142857142857,8357.142857142857,8324.489795918367,
            8266.326530612245,8176.530612244898,8068.367346938776,8063.265306122449,7891.836734693878,7832.65306122449,7727.551020408164,7665.306122448979,7575.510204081633,7535.714285714286,7400.0,7324.489795918367,
            7191.836734693878,7161.224489795918,7186.734693877551,7362.244897959184,7450.0,7363.265306122449,7148.9795918367345,7009.183673469388,6862.244897959184,6767.34693877551,6623.469387755102,6632.65306122449,
            6564.285714285715,6534.693877551021,6540.816326530612,6579.591836734694,6569.3877551020405,6508.163265306122,6491.836734693878,6360.2040816326535,6266.326530612245,6224.489795918367,6139.795918367347,
            6059.183673469388,5983.673469387755,5845.918367346939,5718.367346938776,5641.836734693878,5616.326530612245,5500.0,5435.714285714286,5328.571428571428,5185.714285714286,5140.816326530612,5026.530612244898, 4977.551020408163,
            4880.6122448979595,4804.081632653061,4691.836734693878,4621.428571428572,4583.673469387755,4510.2040816326535,4409.183673469388,4347.95918367347,4319.3877551020405,4202.040816326531,4132.65306122449,
            4110.2040816326535,3992.857142857143,3942.857142857143,3847.9591836734694,3859.183673469388,3756.122448979592,3704.081632653061,3661.2244897959185,3605.1020408163267,3571.4285714285716,3498.979591836735,
            3458.1632653061224,3457.1428571428573,3334.6938775510203,3309.183673469388,3223.469387755102,3148.979591836735,3135.714285714286,3118.3673469387754,3038.775510204082,2960.204081632653,2890.8163265306125,
            2834.6938775510203,2821.4285714285716,2736.734693877551,2662.2448979591836,2641.8367346938776,2531.6326530612246,2510.204081632653,2436.734693877551,2328.5714285714284,2259.183673469388,2212.2448979591836,2115.3061224489797,
            2126.530612244898,2106.122448979592,2077.5510204081634,1936.734693877551,1911.2244897959183,1894.8979591836735,1851.0204081632653,1773.4693877551022,1725.5102040816328,1658.1632653061224,1621.4285714285716,
            1562.2448979591836,1557.142857142857,1515.3061224489795,1441.8367346938776,1383.6734693877552,1342.857142857143,1311.2244897959183,1286.734693877551,1193.8775510204082,1179.591836734694,1146.938775510204,
            1139.795918367347,1089.795918367347,1064.2857142857142,1018.3673469387755,980.6122448979592,961.2244897959184,916.3265306122449,897.9591836734694,880.6122448979592,828.5714285714286,760.2040816326531,740.8163265306123,
            705.1020408163265,684.6938775510204,654.0816326530612,615.3061224489796,600.0,557.1428571428571,541.8367346938776,518.3673469387755,502.0408163265306,472.44897959183675,450.0,419.38775510204084,426.53061224489795,
            392.8571428571429,381.6326530612245,369.38775510204084,345.9183673469388,327.55102040816325,311.2244897959184,296.9387755102041,292.8571428571429,267.3469387755102,272.44897959183675,246.9387755102041,
            242.85714285714286,218.3673469387755,210.20408163265307,210.20408163265307,200.0,183.67346938775512,178.57142857142858,165.3061224489796,150.0,148.9795918367347,141.83673469387756]
wavelength = np.arraywavelength = ([
                                    399.46, 401.48, 403.52, 405.54, 407.56, 409.6, 411.62, 413.65, 415.68, 417.72, 
                                    419.74, 421.78, 423.81, 425.85, 427.88, 429.92, 431.96, 434.0, 436.03, 438.07, 
                                    440.12, 442.16, 444.2, 446.24, 448.29, 450.33, 452.38, 454.42, 456.47, 458.52, 
                                    460.57, 462.62, 464.67, 466.72, 468.78, 470.82, 472.88, 474.94, 477.0, 479.04, 
                                    481.1, 483.16, 485.22, 487.28, 489.34, 491.4, 493.46, 495.54, 497.6, 499.66, 
                                    501.72, 503.79, 505.86, 507.93, 510.0, 512.07, 514.14, 516.22, 518.28, 520.36, 
                                    522.43, 524.51, 526.58, 528.66, 530.74, 532.82, 534.9, 536.98, 539.06, 541.14, 
                                    543.22, 545.31, 547.39, 549.48, 551.57, 553.65, 555.74, 557.83, 559.92, 562.01, 
                                    564.1, 566.19, 568.28, 570.38, 572.48, 574.57, 576.66, 578.76, 580.86, 582.95, 
                                    585.06, 587.16, 589.26, 591.36, 593.46, 595.57, 597.67, 599.78, 601.88, 604.0, 
                                    606.1, 608.21, 610.32, 612.43, 614.55, 616.66, 618.77, 620.88, 623.0, 625.11, 
                                    627.23, 629.35, 631.47, 633.58, 635.7, 637.83, 639.95, 642.07, 644.19, 646.32, 
                                    648.44, 650.57, 652.69, 654.82, 656.95, 659.08, 661.21, 663.34, 665.48, 667.6, 
                                    669.74, 671.88, 674.0, 676.14, 678.29, 680.42, 682.56, 684.7, 686.84, 688.98, 
                                    691.12, 693.26, 695.4, 697.55, 699.7, 701.84, 703.99, 706.14, 708.29, 710.44, 
                                    712.58, 714.74, 716.89, 719.04, 721.2, 723.35, 725.5, 727.66, 729.82, 731.98, 
                                    734.13, 736.29, 738.45, 740.62, 742.78, 744.94, 747.1, 749.27, 751.44, 753.6, 
                                    755.77, 757.94, 760.1, 762.28, 764.44, 766.62, 768.79, 770.96, 773.14, 775.31, 
                                    777.48, 779.66, 781.84, 784.02, 786.2, 788.38, 790.56, 792.74, 794.92, 797.1, 
                                    799.29, 801.47, 803.66, 805.84, 808.04, 810.22, 812.41, 814.6, 816.79, 818.98, 
                                    821.18, 823.37, 825.56, 827.76, 829.95, 832.15, 834.35, 836.55, 838.74, 840.94, 
                                    843.15, 845.35, 847.55, 849.75, 851.96, 854.16, 856.37, 858.58, 860.79, 862.99, 
                                    865.2, 867.41, 869.62, 871.84, 874.04, 876.26, 878.47, 880.69, 882.9, 885.12, 
                                    887.34, 889.56, 891.78, 894.0, 896.22, 898.44, 900.66, 902.88, 905.12, 907.34, 
                                    909.56, 911.79, 914.02, 916.25, 918.48, 920.71, 922.94, 925.17, 927.4, 929.64, 
                                    931.87, 934.11, 936.34, 938.58, 940.82, 943.06, 945.3, 947.54, 949.78, 952.02, 
                                    954.27, 956.51, 958.76, 961.0, 963.24, 965.49, 967.74, 969.99, 972.24, 974.49, 
                                    976.74, 978.99, 981.24, 983.51, 985.76, 988.02, 990.27, 992.53, 994.79, 997.04, 
                                    999.3, 1001.56, 1003.82, 1006.08, 1008.36, 1010.62, 1012.88, 1015.14, 1017.42, 
                                    1019.68, 1021.95, 1024.22, 1026.49, 1028.76, 1031.03, 1033.3, 1035.58, 1037.85, 
                                    1040.13, 1042.4])


filename = 'C:bil_file/salt.bil'
wave = np.zeros((lines, bands, samples))

with open(filename, 'rb') as f:
  data = np.fromfile(f, dtype=np.uint16)
  data = data.reshape([lines, bands, samples])
  for i in range(lines):
    for k in range(samples):
       for j in range(bands):
        #print(data[150,8,500])
        wave[i,j,k] = data[i,j,k] / spectrum[j]


x = 400
y = 200

data_wave = wave[y, :, x]
#print(data_wave)
#print(normal.spectrum)

plt.plot(wavelength, data_wave)
plt.ylim(0.95, 1.15)
plt.show()