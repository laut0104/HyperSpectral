import wave
import numpy as np
from matplotlib import pyplot as plt

lines = 100
samples = 900
bands = 300
wavelength = np.arraywavelength = ([
                                    399.46, 401.48, 403.52, 405.54, 407.56, 409.6, 411.62, 413.65, 415.68, 417.72, 
                                    419.74, 421.78, 423.81, 425.85, 427.88, 429.92, 431.96, 434.0, 436.03, 438.07, 
                                    440.12, 442.16, 444.2, 446.24, 448.29, 450.33, 452.38, 454.42, 456.47, 458.52, 
                                    460.57, 462.62, 464.67, 466.72, 468.78, 470.82, 472.88, 474.94, 477.0, 479.04, 
                                    481.1, 483.16, 485.22, 487.28, 489.34, 491.4, 493.46, 495.54, 497.6, 499.66, 
                                    501.72, 503.79, 505.86, 507.93, 510.0, 512.07, 514.14, 516.22, 518.28, 520.36, 
                                    522.43, 524.51, 526.58, 528.66, 530.74, 532.82, 534.9, 536.98, 539.06, 541.14, 
                                    543.22, 545.31, 547.39, 549.48, 551.57, 553.65, 555.74, 557.83, 559.92, 562.01, 
                                    564.1, 566.19, 568.28, 570.38, 572.48, 574.57, 576.66, 578.76, 580.86, 582.95, 
                                    585.06, 587.16, 589.26, 591.36, 593.46, 595.57, 597.67, 599.78, 601.88, 604.0, 
                                    606.1, 608.21, 610.32, 612.43, 614.55, 616.66, 618.77, 620.88, 623.0, 625.11, 
                                    627.23, 629.35, 631.47, 633.58, 635.7, 637.83, 639.95, 642.07, 644.19, 646.32, 
                                    648.44, 650.57, 652.69, 654.82, 656.95, 659.08, 661.21, 663.34, 665.48, 667.6, 
                                    669.74, 671.88, 674.0, 676.14, 678.29, 680.42, 682.56, 684.7, 686.84, 688.98, 
                                    691.12, 693.26, 695.4, 697.55, 699.7, 701.84, 703.99, 706.14, 708.29, 710.44, 
                                    712.58, 714.74, 716.89, 719.04, 721.2, 723.35, 725.5, 727.66, 729.82, 731.98, 
                                    734.13, 736.29, 738.45, 740.62, 742.78, 744.94, 747.1, 749.27, 751.44, 753.6, 
                                    755.77, 757.94, 760.1, 762.28, 764.44, 766.62, 768.79, 770.96, 773.14, 775.31, 
                                    777.48, 779.66, 781.84, 784.02, 786.2, 788.38, 790.56, 792.74, 794.92, 797.1, 
                                    799.29, 801.47, 803.66, 805.84, 808.04, 810.22, 812.41, 814.6, 816.79, 818.98, 
                                    821.18, 823.37, 825.56, 827.76, 829.95, 832.15, 834.35, 836.55, 838.74, 840.94, 
                                    843.15, 845.35, 847.55, 849.75, 851.96, 854.16, 856.37, 858.58, 860.79, 862.99, 
                                    865.2, 867.41, 869.62, 871.84, 874.04, 876.26, 878.47, 880.69, 882.9, 885.12, 
                                    887.34, 889.56, 891.78, 894.0, 896.22, 898.44, 900.66, 902.88, 905.12, 907.34, 
                                    909.56, 911.79, 914.02, 916.25, 918.48, 920.71, 922.94, 925.17, 927.4, 929.64, 
                                    931.87, 934.11, 936.34, 938.58, 940.82, 943.06, 945.3, 947.54, 949.78, 952.02, 
                                    954.27, 956.51, 958.76, 961.0, 963.24, 965.49, 967.74, 969.99, 972.24, 974.49, 
                                    976.74, 978.99, 981.24, 983.51, 985.76, 988.02, 990.27, 992.53, 994.79, 997.04, 
                                    999.3, 1001.56, 1003.82, 1006.08, 1008.36, 1010.62, 1012.88, 1015.14, 1017.42, 
                                    1019.68, 1021.95, 1024.22, 1026.49, 1028.76, 1031.03, 1033.3, 1035.58, 1037.85, 
                                    1040.13, 1042.4])


filename = 'bil_file/normal.bil'
spectol = np.zeros((lines, bands, samples))

with open(filename, 'rb') as f:
  data = np.fromfile(f, dtype=np.uint16)
  data = data.reshape([lines, bands, samples])
  for i in range(lines):
    for j in range(bands):
      for k in range(samples):
        spectol[i,j,k] = data[i,j,k] / 0.98


x = 450
y = 58
spectrum = spectol[y, :, x]

#plt.plot(wavelength, spectrum)
#plt.show()